{% extends "jobsafi/base.html" %}
{% load static %}
{% block title %}{{ job.title }}{% endblock %}
{% block content %}
<div class="job-container">
    <h2>{{ job.title }}</h2>
    <p class="job-description">{{ job.description }}</p>
    <div class="job-meta">
        <span class="seniority-badge">{{ job.seniority }}</span>
    </div>
</div>

<div class="application-form">
    <h3>Apply for this Position</h3>
    
    {% if messages %}
    <div class="messages">
        {% for message in messages %}
        <div class="message {% if message.tags %}{{ message.tags }}{% endif %}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <form method="post" action="{% url 'job_detail' job.pk %}">
        {% csrf_token %}
        
        <!-- Candidate Information -->
        <div class="candidate-info">
            <h4>Your Information</h4>
            <div class="form-group">
                <label for="candidate_name">Full Name:</label>
                <input type="text" id="candidate_name" name="candidate_name" required>
            </div>
            <div class="form-group">
                <label for="candidate_email">Email:</label>
                <input type="email" id="candidate_email" name="candidate_email" required>
            </div>
        </div>

        <!-- Screening Questions -->
        <div class="questions-section">
            <h4>Screening Questions</h4>
            {% for question in questions %}
                <div class="question-block">
                    <label for="answer_{{ question.id }}">{{ question.text }}</label>
                    <textarea 
                        id="answer_{{ question.id }}" 
                        name="answer_{{ question.id }}" 
                        rows="4" 
                        required
                        placeholder="Type your answer here..."></textarea>
                </div>
            {% empty %}
                <p class="no-questions">No screening questions available for this position.</p>
            {% endfor %}
        </div>
        
        <button type="submit" class="submit-btn">Submit Application</button>
    </form>
</div>
{% endblock %}